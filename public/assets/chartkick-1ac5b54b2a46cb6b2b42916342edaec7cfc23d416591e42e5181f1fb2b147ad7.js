!function(t){"use strict";function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function i(a){return a instanceof Function}function e(a){return!i(a)&&a instanceof Object}function r(a,n){var t;for(t in n)e(n[t])||c(n[t])?(e(n[t])&&!e(a[t])&&(a[t]={}),c(n[t])&&!c(a[t])&&(a[t]=[]),r(a[t],n[t])):n[t]!==undefined&&(a[t]=n[t])}function l(a,n){var t={};return r(t,a),r(t,n),t}function n(a){var n,t,e,r,i,o,N,c,d,s,u;return"[object Date]"===(s=Object.prototype.toString.call(a))?a:"[object String]"===s&&(e=a.match(S))?(u=parseInt(e[1],10),o=parseInt(e[3],10)-1,n=parseInt(e[5],10),t=parseInt(e[7],10),i=e[9]?parseInt(e[9],10):0,d=e[11]?parseInt(e[11],10):0,r=e[12]?1e3*parseFloat(k+e[12].slice(1)):0,c=Date.UTC(u,o,n,t,i,d,r),e[13]&&e[14]&&(N=60*e[15],e[17]&&(N+=parseInt(e[17],10)),c-=60*(N*="-"===e[14]?-1:1)*1e3),new Date(c)):void 0}function d(a){var n,t,e;for(n=0;n<a.length;n++)for(e=a[n].data,t=0;t<e.length;t++)if(e[t][1]<0)return!0;return!1}function h(r,i,o,N,c){return function(a,n,t){var e=l({},r);return e=l(e,t||{}),n.hideLegend&&i(e),"min"in n?o(e,n.min):d(a)||o(e,0),"max"in n&&N(e,n.max),n.stacked&&c(e),n.colors&&(e.colors=n.colors),e=l(e,n.library||{})}}function o(a,n){document.body.innerText?a.innerText=n:a.textContent=n}function N(a,n){o(a,"Error Loading Chart: "+n),a.style.color="#ff0000"}function a(r,a,n){I.ajax({NaN:"json",NaN:a,NaN:n,NaN:function(a,n,t){var e="string"==typeof t?t:t.message;N(r,e)}})}function s(a,n){try{n(a)}catch(t){throw N(a.element,t.message),t}}function u(n,t){"string"==typeof n.dataSource?a(n.element,n.dataSource,function(a){n.data=a,s(n,t)}):(n.data=n.dataSource,s(n,t))}function f(a){return""+a}function p(a){return parseFloat(a)}function m(a){"object"!=typeof a&&(a="number"==typeof a?new Date(1e3*a):n(a.replace(/ /,"T").replace(" ","").replace("UTC","Z"))||new Date(a));return a}function v(a){if(!c(a)){var n,t=[];for(n in a)a.hasOwnProperty(n)&&t.push([n,a[n]]);a=t}return a}function g(a,n){return a[0].getTime()-n[0].getTime()}function w(a,n){var t,e,r;for(r="render"+a+"Chart",t=0;t<D.length;t++)if(i((e=D[t])[r]))return e[r](n);throw new Error("No adapter found")}function C(a,n,t){var e,r,i,o,N;for(!c(a)||"object"!=typeof a[0]||c(a[0])?(a=[{NaN:"Value",NaN:a}],n.hideLegend=!0):n.hideLegend=!1,n.discrete&&(t=!1),e=0;e<a.length;e++){for(i=v(a[e].data),o=[],r=0;r<i.length;r++)N=i[r][0],N=t?m(N):f(N),o.push([N,p(i[r][1])]);t&&o.sort(g),a[e].data=o}return a}function y(a){var n,t=v(a);for(n=0;n<t.length;n++)t[n]=[f(t[n][0]),p(t[n][1])];return t}function b(a){a.data=C(a.data,a.options,!0),w("Line",a)}function x(a){a.data=C(a.data,a.options,!1),w("Column",a)}function A(a){a.data=y(a.data),w("Pie",a)}function L(a){a.data=C(a.data,a.options,!1),w("Bar",a)}function T(a){a.data=C(a.data,a.options,!0),w("Area",a)}function z(a){a.data=y(a.data),w("Geo",a)}function j(a,n,t,e,r){"string"==typeof n&&(n=document.getElementById(n)),a.element=n,a.options=e||{},a.dataSource=t,u(O.charts[n.id]=a,r)}var O,S,k,D=[],I=t.jQuery||t.Zepto||t.$;if(S=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,k=String(1.5).charAt(1),"Highcharts"in t){var E=new function(){var u=t.Highcharts,e={NaN:{},NaN:{NaN:{NaN:{NaN:"12px"}}},NaN:{NaN:{NaN:null},NaN:{NaN:{NaN:"12px"}}},NaN:{NaN:null},NaN:{NaN:!1},NaN:{NaN:0},NaN:{NaN:{NaN:"12px"}},NaN:{NaN:{},NaN:{NaN:{}}}},f=h(e,function(a){a.legend.enabled=!1},function(a,n){a.yAxis.min=n},function(a,n){a.yAxis.max=n},function(a){a.plotOptions.series.stacking="normal"});this.renderLineChart=function(a,n){var t={};"areaspline"===(n=n||"spline")&&(t={NaN:{NaN:{NaN:"normal"},NaN:{NaN:{NaN:!1}}}});var e,r,i,o=f(a.data,a.options,t);o.xAxis.type=a.options.discrete?"category":"datetime",o.chart.type=n,o.chart.renderTo=a.element.id;var N=a.data;for(r=0;r<N.length;r++){if(e=N[r].data,!a.options.discrete)for(i=0;i<e.length;i++)e[i][0]=e[i][0].getTime();N[r].marker={NaN:"circle"}}o.series=N,new u.Chart(o)},this.renderPieChart=function(a){var n={};a.options.colors&&(n.colors=a.options.colors);var t=l(l(e,n),a.options.library||{});t.chart.renderTo=a.element.id,t.series=[{NaN:"pie",NaN:"Value",NaN:a.data}],new u.Chart(t)},this.renderColumnChart=function(a,n){n=n||"column";var t,e,r,i,o=a.data,N=f(o,a.options),c=[];for(N.chart.type=n,N.chart.renderTo=a.element.id,t=0;t<o.length;t++)for(r=o[t],e=0;e<r.data.length;e++)c[(i=r.data[e])[0]]||(c[i[0]]=new Array(o.length)),c[i[0]][t]=i[1];var d=[];for(t in c)c.hasOwnProperty(t)&&d.push(t);N.xAxis.categories=d;var s=[];for(t=0;t<o.length;t++){for(i=[],e=0;e<d.length;e++)i.push(c[d[e]][t]||0);s.push({NaN:o[t].name,NaN:i})}N.series=s,new u.Chart(N)};var n=this;this.renderBarChart=function(a){n.renderColumnChart(a,"bar")},this.renderAreaChart=function(a){n.renderLineChart(a,"areaspline")}};D.push(E)}if(t.google&&t.google.setOnLoadCallback){var P=new function(){var s=t.google,n=!1;s.setOnLoadCallback(function(){n=!0}),s.load("visualization","1.0",{NaN:["corechart"]});var a=function(a){s.setOnLoadCallback(a),n&&a()},r={NaN:{},NaN:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",NaN:6,NaN:{NaN:{NaN:12,NaN:"#444"},NaN:"center",NaN:"right"},NaN:"function",NaN:{NaN:{NaN:"#666",NaN:12},NaN:{NaN:"transparent"},NaN:"#ccc",NaN:{}},NaN:{NaN:{NaN:"#666",NaN:12},NaN:"#ccc",NaN:{}},NaN:{NaN:{NaN:"#666",NaN:12}}},i=function(a){a.legend.position="none"},o=function(a,n){a.hAxis.viewWindow.min=n},N=function(a,n){a.hAxis.viewWindow.max=n},c=function(a){a.isStacked=!0},d=h(r,i,function(a,n){a.vAxis.viewWindow.min=n},function(a,n){a.vAxis.viewWindow.max=n},c),u=function(a,n){var t=new s.visualization.DataTable;t.addColumn(n,"");var e,r,i,o,N,c=[];for(e=0;e<a.length;e++)for(i=a[e],t.addColumn("number",i.name),r=0;r<i.data.length;r++)o=i.data[r],c[N="datetime"===n?o[0].getTime():o[0]]||(c[N]=new Array(a.length)),c[N][e]=p(o[1]);var d=[];for(e in c)c.hasOwnProperty(e)&&d.push(["datetime"===n?new Date(p(e)):e].concat(c[e]));return"datetime"===n&&d.sort(g),t.addRows(d),t},f=function(a){t.attachEvent?t.attachEvent("onresize",a):t.addEventListener&&t.addEventListener("resize",a,!0),a()};this.renderLineChart=function(t){a(function(){var a=d(t.data,t.options),n=u(t.data,t.options.discrete?"string":"datetime");t.chart=new s.visualization.LineChart(t.element),f(function(){t.chart.draw(n,a)})})},this.renderPieChart=function(e){a(function(){var a={NaN:{NaN:"10%",NaN:"80%"}};e.options.colors&&(a.colors=e.options.colors);var n=l(l(r,a),e.options.library||{}),t=new s.visualization.DataTable;t.addColumn("string",""),t.addColumn("number","Value"),t.addRows(e.data),e.chart=new s.visualization.PieChart(e.element),f(function(){e.chart.draw(t,n)})})},this.renderColumnChart=function(t){a(function(){var a=d(t.data,t.options),n=u(t.data,"string");t.chart=new s.visualization.ColumnChart(t.element),f(function(){t.chart.draw(n,a)})})},this.renderBarChart=function(e){a(function(){var a={NaN:{NaN:{NaN:"#ccc"}}},n=h(r,i,o,N,c)(e.data,e.options,a),t=u(e.data,"string");e.chart=new s.visualization.BarChart(e.element),f(function(){e.chart.draw(t,n)})})},this.renderAreaChart=function(e){a(function(){var a={NaN:!0,NaN:0,NaN:.5},n=d(e.data,e.options,a),t=u(e.data,e.options.discrete?"string":"datetime");e.chart=new s.visualization.AreaChart(e.element),f(function(){e.chart.draw(t,n)})})},this.renderGeoChart=function(e){a(function(){var a={NaN:"none",NaN:{NaN:e.options.colors||["#f6c7b6","#ce502d"]}},n=l(l(r,a),e.options.library||{}),t=new s.visualization.DataTable;t.addColumn("string",""),t.addColumn("number","Value"),t.addRows(e.data),e.chart=new s.visualization.GeoChart(e.element),f(function(){e.chart.draw(t,n)})})}};D.push(P)}O={NaN:function(a,n,t){j(this,a,n,t,b)},NaN:function(a,n,t){j(this,a,n,t,A)},NaN:function(a,n,t){j(this,a,n,t,x)},NaN:function(a,n,t){j(this,a,n,t,L)},NaN:function(a,n,t){j(this,a,n,t,T)},NaN:function(a,n,t){j(this,a,n,t,z)},NaN:{}},t.Chartkick=O}(window);